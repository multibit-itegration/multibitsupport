import{$ as q,A as de,B as L,C as P,D as _,E as c,F as V,G as o,H as s,I as y,J as ke,K as Oe,L as C,M as h,N as d,O as a,P as $,Q as N,R as ce,S as he,T as pe,U as fe,V as x,W,X as Re,Z as Pe,_ as Ne,a as g,aa as w,b as v,ba as me,c as De,ca as Te,d as we,da as z,e as ne,ea as D,f as Ee,fa as Ue,g as Me,h as re,i as oe,ia as Be,j as se,k as ae,l as E,m as Fe,n as b,o as ue,p as M,q as Ae,r as f,s as m,t as F,u as Se,v as Ie,w as A,x as le,y as u,z as p}from"./chunk-WYJNBOAX.js";var ze=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||i)(p(de),p(le))}}static{this.\u0275dir=M({type:i})}}return i})(),lt=(()=>{class i extends ze{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ie(i)))(r||i)}})()}static{this.\u0275dir=M({type:i,features:[P]})}}return i})(),Qe=new E("");var dt={provide:Qe,useExisting:oe(()=>K),multi:!0};function ct(){let i=me()?me().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var ht=new E(""),K=(()=>{class i extends ze{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ct())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||i)(p(de),p(le),p(ht,8))}}static{this.\u0275dir=M({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&h("input",function(R){return r._handleInput(R.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(R){return r._compositionEnd(R.target.value)})},features:[fe([dt]),P]})}}return i})();var pt=new E(""),ft=new E("");function Ye(i){return i!=null}function Ze(i){return Re(i)?we(i):i}function Xe(i){let e={};return i.forEach(t=>{e=t!=null?g(g({},e),t):e}),Object.keys(e).length===0?null:e}function Ke(i,e){return e.map(t=>t(i))}function mt(i){return!i.validate}function Je(i){return i.map(e=>mt(e)?e:t=>e.validate(t))}function gt(i){if(!i)return null;let e=i.filter(Ye);return e.length==0?null:function(t){return Xe(Ke(t,e))}}function et(i){return i!=null?gt(Je(i)):null}function _t(i){if(!i)return null;let e=i.filter(Ye);return e.length==0?null:function(t){let n=Ke(t,e).map(Ze);return Me(n).pipe(Ee(Xe))}}function tt(i){return i!=null?_t(Je(i)):null}function je(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function vt(i){return i._rawValidators}function yt(i){return i._rawAsyncValidators}function ge(i){return i?Array.isArray(i)?i:[i]:[]}function Y(i,e){return Array.isArray(i)?i.includes(e):i===e}function Ge(i,e){let t=ge(e);return ge(i).forEach(r=>{Y(t,r)||t.push(r)}),t}function He(i,e){return ge(e).filter(t=>!Y(i,t))}var Z=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=et(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},_e=class extends Z{get formDirective(){return null}get path(){return null}},G=class extends Z{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ve=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Ct={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xi=v(g({},Ct),{"[class.ng-submitted]":"isSubmitted"}),it=(()=>{class i extends ve{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(p(G,2))}}static{this.\u0275dir=M({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&V("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[P]})}}return i})();var T="VALID",Q="INVALID",S="PENDING",U="DISABLED",k=class{},X=class extends k{constructor(e,t){super(),this.value=e,this.source=t}},B=class extends k{constructor(e,t){super(),this.pristine=e,this.source=t}},j=class extends k{constructor(e,t){super(),this.touched=e,this.source=t}},I=class extends k{constructor(e,t){super(),this.status=e,this.source=t}};function bt(i){return(J(i)?i.validators:i)||null}function Vt(i){return Array.isArray(i)?et(i):i||null}function xt(i,e){return(J(e)?e.asyncValidators:i)||null}function Dt(i){return Array.isArray(i)?tt(i):i||null}function J(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var ye=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=q(()=>this.statusReactive()),this.statusReactive=L(void 0),this._pristine=q(()=>this.pristineReactive()),this.pristineReactive=L(!0),this._touched=q(()=>this.touchedReactive()),this.touchedReactive=L(!1),this._events=new De,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return w(this.statusReactive)}set status(e){w(()=>this.statusReactive.set(e))}get valid(){return this.status===T}get invalid(){return this.status===Q}get pending(){return this.status==S}get disabled(){return this.status===U}get enabled(){return this.status!==U}get pristine(){return w(this.pristineReactive)}set pristine(e){w(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return w(this.touchedReactive)}set touched(e){w(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ge(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ge(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(He(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(He(e,this._rawAsyncValidators))}hasValidator(e){return Y(this._rawValidators,e)}hasAsyncValidator(e){return Y(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(v(g({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new j(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new j(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(v(g({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new B(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new B(!0,n))}markAsPending(e={}){this.status=S;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new I(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(v(g({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=U,this.errors=null,this._forEachChild(r=>{r.disable(v(g({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new X(this.value,n)),this._events.next(new I(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(v(g({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=T,this._forEachChild(n=>{n.enable(v(g({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(v(g({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===T||this.status===S)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new X(this.value,t)),this._events.next(new I(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(v(g({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?U:T}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=S,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=Ze(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new I(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new A,this.statusChanges=new A}_calculateStatus(){return this._allControlsDisabled()?U:this.errors?Q:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(S)?S:this._anyControlsHaveStatus(Q)?Q:T}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new B(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new j(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){J(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Vt(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Dt(this._rawAsyncValidators)}};var nt=new E("CallSetDisabledState",{providedIn:"root",factory:()=>Ce}),Ce="always";function wt(i,e){return[...e.path,i]}function Et(i,e,t=Ce){Ft(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),At(i,e),It(i,e),St(i,e),Mt(i,e)}function Le(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Mt(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function Ft(i,e){let t=vt(i);e.validator!==null?i.setValidators(je(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=yt(i);e.asyncValidator!==null?i.setAsyncValidators(je(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Le(e._rawValidators,r),Le(e._rawAsyncValidators,r)}function At(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&rt(i,e)})}function St(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&rt(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function rt(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function It(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function kt(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ot(i){return Object.getPrototypeOf(i.constructor)===lt}function Rt(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(l=>{l.constructor===K?t=l:Ot(l)?n=l:r=l}),r||n||t||null}function $e(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function We(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Pt=class extends ye{constructor(e=null,t,n){super(bt(t),xt(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),J(t)&&(t.nonNullable||t.initialValueIsDefault)&&(We(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$e(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$e(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){We(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Nt={provide:G,useExisting:oe(()=>be)},qe=Promise.resolve(),be=(()=>{class i extends G{constructor(t,n,r,l,R,ut){super(),this._changeDetectorRef=R,this.callSetDisabledState=ut,this.control=new Pt,this._registered=!1,this.name="",this.update=new A,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Rt(this,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),kt(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Et(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){qe.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&Ne(n);qe.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?wt(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||i)(p(_e,9),p(pt,10),p(ft,10),p(Qe,10),p(Pe,8),p(nt,8))}}static{this.\u0275dir=M({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fe([Nt]),P,Ae]})}}return i})();var Tt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ue({type:i})}static{this.\u0275inj=ae({})}}return i})();var ot=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:nt,useValue:t.callSetDisabledState??Ce}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ue({type:i})}static{this.\u0275inj=ae({imports:[Tt]})}}return i})();var O=class i{constructor(e){this.http=e}apiUrl="http://217.198.6.143:8000/task/rate/";submitUrl="http://217.198.6.143:8000/task/datatag/";usersUrl="http://217.198.6.143:8000/user/list/";useMockData=!1;fieldIds={performer:104006,overallRating:103944,nps:103958,supportRating:103942,hasIssues:103946,praise:103948,improvements:103950};getTaskRating(e){return this.useMockData?this.getMockResponse(e):this.http.get(`${this.apiUrl}?task_id=${e}`)}getUsers(){return this.http.get(this.usersUrl)}submitRating(e,t,n){if(this.useMockData)return ne({success:!0}).pipe(re(1e3));let r=[{field:{id:this.fieldIds.performer},value:e},{field:{id:this.fieldIds.overallRating},value:t}];n&&(n.support!==null&&r.push({field:{id:this.fieldIds.supportRating},value:n.support}),n.nps!==null&&r.push({field:{id:this.fieldIds.nps},value:n.nps}),n.hasIssues!==null&&r.push({field:{id:this.fieldIds.hasIssues},value:n.hasIssues?"\u0434\u0430":"\u043D\u0435\u0442"}),n.praiseUserId!==void 0&&n.praiseUserId!==null?r.push({field:{id:this.fieldIds.praise},value:n.praiseUserId}):n.praise&&n.praise.trim()&&r.push({field:{id:this.fieldIds.praise},value:n.praise.trim()}),n.improvements&&n.improvements.trim()&&r.push({field:{id:this.fieldIds.improvements},value:n.improvements.trim()}));let l={items:[{customFieldData:r}]};return this.http.post(`${this.submitUrl}?task_id=${e}`,l)}getMockResponse(e){return ne(this.getMockDataForTask(e)).pipe(re(500))}getMockDataForTask(e){let t=[{detail:"\u041F\u043E\u043B\u0435 value \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0438\u043B\u0438 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 \u043D\u0451\u043C null."},{detail:"\u0412\u044B \u0443\u0436\u0435 \u043E\u0441\u0442\u0430\u0432\u0438\u043B\u0438 \u043E\u0442\u0437\u044B\u0432 \u043F\u043E \u044D\u0442\u043E\u0439 \u0437\u0430\u044F\u0432\u043A\u0435 \u{1F60A} \u0421\u043F\u0430\u0441\u0438\u0431\u043E!"},{detail:"\u0412\u0440\u0435\u043C\u044F \u043E\u0436\u0438\u0434\u0430\u043D\u0438\u044F \u043E\u0446\u0435\u043D\u043A\u0438 \u0438\u0441\u0442\u0435\u043A\u043B\u043E!"}],n=parseInt(e);return n%3===0?t[0]:n%3===1?t[1]:t[2]}setMockMode(e){this.useMockData=e}static \u0275fac=function(t){return new(t||i)(Fe(Ue))};static \u0275prov=se({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ve=()=>[1,2,3,4,5,6,7,8,9,10];function jt(i,e){i&1&&(o(0,"span",14),a(1,"\u0432\u044B\u0441\u0448\u0430\u044F \u043E\u0446\u0435\u043D\u043A\u0430"),s())}function Gt(i,e){if(i&1){let t=C();ke(0),o(1,"button",12),h("click",function(){let r=f(t).$implicit,l=d();return m(l.onRatingChange(r))}),a(2),s(),_(3,jt,2,0,"span",13),Oe()}if(i&2){let t=e.$implicit,n=e.last,r=d();u(),V("selected",r.selectedRating===t)("pre-selected",!r.userHasSelected&&r.preSelectedRating===t),c("disabled",r.isSubmitting),u(),N(" ",t," "),u(),c("ngIf",n)}}function Ht(i,e){if(i&1){let t=C();o(0,"span",15),h("click",function(r){f(t);let l=d();return r.stopPropagation(),m(l.showExtendedForm=!1)}),a(1,"\u2715"),s()}}function Lt(i,e){if(i&1){let t=C();o(0,"button",29),h("click",function(){let r=f(t).$implicit,l=d(2);return m(l.extendedRating.support=r)}),a(1),s()}if(i&2){let t=e.$implicit,n=d(2);V("selected",n.extendedRating.support===t),u(),N(" ",t," ")}}function $t(i,e){if(i&1){let t=C();o(0,"button",29),h("click",function(){let r=f(t).$implicit,l=d(2);return m(l.extendedRating.nps=r)}),a(1),s()}if(i&2){let t=e.$implicit,n=d(2);V("selected",n.extendedRating.nps===t),u(),N(" ",t," ")}}function Wt(i,e){if(i&1){let t=C();o(0,"span",30),h("click",function(){f(t);let r=d(2);return m(r.resetPraiseUser())}),a(1,"\u2715"),s()}}function qt(i,e){if(i&1){let t=C();o(0,"button",33),h("click",function(){let r=f(t).$implicit,l=d(3);return m(l.selectPraiseUser(r))}),a(1),s()}if(i&2){let t=e.$implicit;u(),$(t.FIO)}}function zt(i,e){if(i&1&&(o(0,"div",31),_(1,qt,2,1,"button",32),s()),i&2){let t=d(2);u(),c("ngForOf",t.filteredUsers)}}function Qt(i,e){if(i&1){let t=C();o(0,"div",16)(1,"div",17)(2,"div",18),a(3,"1. \u041E\u0431\u0449\u0430\u044F \u043E\u0446\u0435\u043D\u043A\u0430 \u0442\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u043E\u0439 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0438 (1-10)"),s(),o(4,"div",19),a(5,"\u041A\u0430\u043A \u0432\u044B \u043E\u0446\u0435\u043D\u0438\u0432\u0430\u0435\u0442\u0435 \u0440\u0430\u0431\u043E\u0442\u0443 \u0442\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u043E\u0439 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0438?"),y(6,"br"),a(7,"(1 \u2014 \u043E\u0447\u0435\u043D\u044C \u043F\u043B\u043E\u0445\u043E, 10 \u2014 \u043E\u0442\u043B\u0438\u0447\u043D\u043E)"),s(),o(8,"div",20),_(9,Lt,2,3,"button",21),s()(),o(10,"div",17)(11,"div",18),a(12,"2. \u041D\u0430\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0432\u0435\u0440\u043E\u044F\u0442\u043D\u043E, \u0447\u0442\u043E \u0432\u044B \u043F\u043E\u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u0442\u0435 \u043D\u0430\u0448\u0443 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u044E \u0434\u0440\u0443\u0437\u044C\u044F\u043C \u0438\u043B\u0438 \u043A\u043E\u043B\u043B\u0435\u0433\u0430\u043C?"),s(),o(13,"div",19),a(14,"(1 \u2014 \u0442\u043E\u0447\u043D\u043E \u043D\u0435 \u043F\u043E\u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u044E, 10 \u2014 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043F\u043E\u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u044E)"),s(),o(15,"div",20),_(16,$t,2,3,"button",21),s()(),o(17,"div",17)(18,"div",18),a(19,"3. \u041D\u0435\u0434\u043E\u0434\u0435\u043B\u043A\u0438 (\u0434\u0430/\u043D\u0435\u0442)"),s(),o(20,"div",19),a(21,"\u0411\u044B\u043B\u0438 \u043B\u0438 \u043D\u0435\u0434\u043E\u0447\u0451\u0442\u044B \u0438\u043B\u0438 \u043D\u0435\u0440\u0435\u0448\u0451\u043D\u043D\u044B\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u043F\u043E\u0441\u043B\u0435 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u044F\u0432\u043A\u0438?"),s(),o(22,"div",22)(23,"button",23),h("click",function(){f(t);let r=d();return m(r.extendedRating.hasIssues=!0)}),a(24,"\u0414\u0430"),s(),o(25,"button",23),h("click",function(){f(t);let r=d();return m(r.extendedRating.hasIssues=!1)}),a(26,"\u041D\u0435\u0442"),s()()(),o(27,"div",17)(28,"div",18),a(29,"4. \u041F\u043E\u0445\u0432\u0430\u043B\u0430 (\u0441\u043F\u0438\u0441\u043E\u043A \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432)"),s(),o(30,"div",19),a(31,"\u0425\u043E\u0442\u0438\u0442\u0435 \u043E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u043E\u0433\u043E-\u0442\u043E \u0438\u0437 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432?"),y(32,"br"),a(33,"(\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430 \u043E\u0434\u043D\u043E\u0433\u043E \u0438\u043B\u0438 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u0438\u0445 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432, \u043A\u043E\u0442\u043E\u0440\u044B\u0445 \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u043E\u0445\u0432\u0430\u043B\u0438\u0442\u044C)"),s(),o(34,"div",24)(35,"input",25),pe("ngModelChange",function(r){f(t);let l=d();return he(l.praiseQuery,r)||(l.praiseQuery=r),m(r)}),h("input",function(){f(t);let r=d();return m(r.onPraiseInput())})("focus",function(){f(t);let r=d();return m(r.onPraiseInput())}),s(),_(36,Wt,2,0,"span",26),s(),_(37,zt,2,1,"div",27),s(),o(38,"div",17)(39,"div",18),a(40,"5. \u0427\u0442\u043E \u043D\u0443\u0436\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C, \u0447\u0442\u043E\u0431\u044B \u0441\u0442\u0430\u0442\u044C \u043B\u0443\u0447\u0448\u0435?"),s(),o(41,"textarea",28),pe("ngModelChange",function(r){f(t);let l=d();return he(l.extendedRating.improvements,r)||(l.extendedRating.improvements=r),m(r)}),s()()()}if(i&2){let t=d();u(9),c("ngForOf",W(10,Ve)),u(7),c("ngForOf",W(11,Ve)),u(7),V("active",t.extendedRating.hasIssues===!0),u(2),V("active",t.extendedRating.hasIssues===!1),u(10),ce("ngModel",t.praiseQuery),u(),c("ngIf",t.praiseQuery),u(),c("ngIf",t.showUsersDropdown),u(4),ce("ngModel",t.extendedRating.improvements)}}function Yt(i,e){i&1&&(o(0,"span"),a(1,"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430..."),s())}function Zt(i,e){i&1&&(o(0,"span"),a(1,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),s())}function Xt(i,e){if(i&1&&(o(0,"div",34),a(1),s()),i&2){let t=d();u(),N(" ",t.submitError," ")}}var ee=class i{constructor(e){this.taskService=e}resetPraiseUser(){this.selectedPraiseUserId=null,this.extendedRating.praiseUserId=null,this.praiseQuery="",this.showUsersDropdown=!1}taskId="";preSelectedRating=null;ratingSubmitted=new A;selectedRating=5;showExtendedForm=!1;isSubmitting=!1;submitError="";userHasSelected=!1;extendedRating={support:null,nps:null,hasIssues:null,praise:"",improvements:""};users=[];filteredUsers=[];praiseQuery="";selectedPraiseUserId=null;showUsersDropdown=!1;ngOnInit(){this.preSelectedRating!==null&&(this.selectedRating=this.preSelectedRating),this.taskService.getUsers().subscribe({next:e=>{let t=new Set([136,132,131,70]);this.users=(e.users??[]).filter(n=>!t.has(n.id)),this.filteredUsers=this.users},error:()=>{this.users=[],this.filteredUsers=[]}})}onRatingChange(e){this.selectedRating=e,this.userHasSelected=!0}toggleExtendedForm(){this.showExtendedForm=!this.showExtendedForm}onPraiseInput(){let e=(this.praiseQuery||"").toLowerCase().trim();if(this.selectedPraiseUserId=null,this.extendedRating.praiseUserId=null,this.extendedRating.praise=this.praiseQuery,!e){this.filteredUsers=this.users,this.showUsersDropdown=this.filteredUsers.length>0;return}this.filteredUsers=this.users.filter(t=>(t.FIO||"").toLowerCase().includes(e)),this.showUsersDropdown=this.filteredUsers.length>0}selectPraiseUser(e){this.praiseQuery=e.FIO,this.selectedPraiseUserId=e.id,this.extendedRating.praiseUserId=e.id,this.extendedRating.praise=e.FIO,this.showUsersDropdown=!1}onSubmit(){if(this.isSubmitting)return;this.isSubmitting=!0,this.submitError="";let e=this.showExtendedForm?v(g({},this.extendedRating),{praiseUserId:this.selectedPraiseUserId??this.extendedRating.praiseUserId??null,praise:this.praiseQuery||this.extendedRating.praise||""}):null;this.taskService.submitRating(this.taskId,this.selectedRating,e).subscribe({next:()=>{this.isSubmitting=!1,this.ratingSubmitted.emit()},error:t=>{this.isSubmitting=!1,this.submitError="\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u043E\u0446\u0435\u043D\u043A\u0438. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.",console.error("Error submitting rating:",t)}})}resetForm(){this.selectedRating=this.preSelectedRating??5,this.showExtendedForm=!1,this.isSubmitting=!1,this.submitError="",this.userHasSelected=!1,this.extendedRating={support:null,nps:null,hasIssues:null,praise:"",praiseUserId:null,improvements:""},this.praiseQuery="",this.selectedPraiseUserId=null,this.filteredUsers=this.users,this.showUsersDropdown=!1}static \u0275fac=function(t){return new(t||i)(p(O))};static \u0275cmp=b({type:i,selectors:[["app-rating-form"]],inputs:{taskId:"taskId",preSelectedRating:"preSelectedRating"},outputs:{ratingSubmitted:"ratingSubmitted"},standalone:!0,features:[x],decls:15,vars:8,consts:[[1,"rating-form"],[1,"question-card"],[1,"question-title"],[1,"rating-buttons"],[4,"ngFor","ngForOf"],["type","button",1,"cta-hint",3,"click"],["class","close-extended",3,"click",4,"ngIf"],["class","extended-form",4,"ngIf"],[1,"submit-section"],[1,"submit-btn",3,"click","disabled"],[4,"ngIf"],["class","error-message",4,"ngIf"],[3,"click","disabled"],["class","rating-caption",4,"ngIf"],[1,"rating-caption"],[1,"close-extended",3,"click"],[1,"extended-form"],[1,"section"],[1,"section-title"],[1,"section-sub"],[1,"scale-row"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"chip-group"],[1,"chip",3,"click"],[1,"praise-input-wrapper"],["type","text","placeholder","\u041D\u0430\u0447\u043D\u0438\u0442\u0435 \u0432\u0432\u043E\u0434\u0438\u0442\u044C \u0438\u043C\u044F \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430",1,"text-input",3,"ngModelChange","input","focus","ngModel"],["class","close-praise",3,"click",4,"ngIf"],["class","dropdown",4,"ngIf"],["rows","6","placeholder","\u0412\u0430\u0448\u0438 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F",1,"textarea",3,"ngModelChange","ngModel"],[3,"click"],[1,"close-praise",3,"click"],[1,"dropdown"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[1,"error-message"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),a(3,"\u041A\u0430\u043A \u0432\u044B \u043E\u0446\u0435\u043D\u0438\u0432\u0430\u0435\u0442\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0432\u0430\u0448\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438?"),s(),o(4,"div",3),_(5,Gt,4,7,"ng-container",4),s()(),o(6,"button",5),h("click",function(){return n.toggleExtendedForm()}),_(7,Ht,2,0,"span",6),a(8," \xAB\u041F\u043E\u043C\u043E\u0433\u0438\u0442\u0435 \u043D\u0430\u043C \u0441\u0442\u0430\u0442\u044C \u043B\u0443\u0447\u0448\u0435 \u2014 \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u0443\u044E \u0444\u043E\u0440\u043C\u0443 \u043E\u0446\u0435\u043D\u043A\u0438\xBB "),s(),_(9,Qt,42,12,"div",7),o(10,"div",8)(11,"button",9),h("click",function(){return n.onSubmit()}),_(12,Yt,2,0,"span",10)(13,Zt,2,0,"span",10),s(),_(14,Xt,2,1,"div",11),s()()),t&2&&(u(5),c("ngForOf",W(7,Ve)),u(2),c("ngIf",n.showExtendedForm),u(2),c("ngIf",n.showExtendedForm),u(2),c("disabled",n.isSubmitting),u(),c("ngIf",n.isSubmitting),u(),c("ngIf",!n.isSubmitting),u(),c("ngIf",n.submitError))},dependencies:[D,Te,z,ot,K,it,be],styles:['@charset "UTF-8";.praise-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.close-praise[_ngcontent-%COMP%]{position:absolute;right:18px;font-size:24px;color:#6635f3;cursor:pointer;-webkit-user-select:none;user-select:none;transition:color .2s;z-index:2}.close-praise[_ngcontent-%COMP%]:hover{color:#3b82f6}.rating-form[_ngcontent-%COMP%]{background:transparent;width:100%}.question-card[_ngcontent-%COMP%]{background:#6635f3;border:2px solid #3B82F6;border-radius:12px;padding:22px 28px;margin-bottom:16px}.question-title[_ngcontent-%COMP%]{color:#fff;font-size:22px;font-weight:800;margin-bottom:18px}.rating-section[_ngcontent-%COMP%]{margin-bottom:30px}.rating-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px;flex-wrap:nowrap}.rating-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:44px;height:44px;min-width:44px;flex:0 0 44px;border:2px solid #EEE;background:#fff;border-radius:999px;font-size:16px;font-weight:600;color:#5a2fcf;cursor:pointer;transition:border-color .2s ease,background-color .2s ease,color .2s ease;display:flex;align-items:center;justify-content:center;padding:0}.rating-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#5a2fcf}.rating-buttons[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], .rating-buttons[_ngcontent-%COMP%]   button.pre-selected[_ngcontent-%COMP%]{background:#a6ff73;border-color:#000;color:#000}.rating-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.rating-caption[_ngcontent-%COMP%]{color:#fff;opacity:.9;font-size:14px;white-space:nowrap;margin-left:8px;margin-right:0;align-self:center}.cta-hint[_ngcontent-%COMP%]{border:2px dashed #6635F3;color:#000;padding:18px;border-radius:10px;margin:8px 0 18px;text-align:center;background:transparent;width:100%;cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center}.close-extended[_ngcontent-%COMP%]{position:absolute;right:24px;font-size:28px;color:#6635f3;cursor:pointer;-webkit-user-select:none;user-select:none;transition:color .2s;z-index:2}.close-extended[_ngcontent-%COMP%]:hover{color:#3b82f6}.extended-form[_ngcontent-%COMP%]{background:#6635f3;border:2px solid #3B82F6;border-radius:12px;padding:32px 28px;color:#fff;font-size:17px}.section[_ngcontent-%COMP%]{margin-bottom:16px}.section-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;font-size:21px}.section-sub[_ngcontent-%COMP%]{opacity:.9;font-size:15px;margin-bottom:14px}.scale-row[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}.chip-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px}.scale-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:999px;border:2px solid #EEE;background:#fff;color:#5a2fcf;font-weight:700;cursor:pointer}.scale-row[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{background:#a6ff73;color:#000;border-color:#5a2fcf;transform:scale(1.12);z-index:1}.btn-row[_ngcontent-%COMP%]{display:flex;gap:12px}.chip[_ngcontent-%COMP%]{background:#fff;color:#5a2fcf;border:2px solid #EEE;border-radius:10px;padding:6px 16px;font-weight:700;cursor:pointer}.chip.active[_ngcontent-%COMP%]{background:#a6ff73;color:#000;border-color:#5a2fcf;transform:scale(1.12);z-index:1}.text-input[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%]{width:100%;border-radius:8px;border:2px solid #EEE;padding:10px 12px}.dropdown[_ngcontent-%COMP%]{background:#fff;border:1px solid #DDD;border-radius:8px;margin-top:6px;max-height:180px;overflow:auto}.dropdown-item[_ngcontent-%COMP%]{display:block;width:100%;text-align:left;padding:8px 12px;border:none;background:#fff;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f4f4f5}.submit-section[_ngcontent-%COMP%]{text-align:center;margin-top:32px}.submit-btn[_ngcontent-%COMP%]{background:#6635f3;color:#fff;border:none;padding:12px 28px;border-radius:8px;font-size:16px;font-weight:700;cursor:pointer;transition:background .2s ease}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a2fcf}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.error-message[_ngcontent-%COMP%]{margin-top:16px;color:#e74c3c;font-size:14px;background:#fdf2f2;padding:8px 12px;border-radius:6px;border:1px solid #fecaca}']})};var te=class i{downloadPdf(){let e=document.createElement("a");e.href="/assets/maintenance-guide.pdf",e.download="\u041F\u0430\u043C\u044F\u0442\u043A\u0430 \u043F\u043E \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u044E.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-thank-you"]],standalone:!0,features:[x],decls:11,vars:0,consts:[[1,"thank-you"],[1,"thank-you-message"],[1,"download-section"],[1,"download-btn",3,"click"],[1,"download-text"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"download-icon"],["d","M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","7,10 12,15 17,10","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","15","x2","12","y2","3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),a(2," \u0412\u044B \u0443\u0436\u0435 \u043E\u0441\u0442\u0430\u0432\u0438\u043B\u0438 \u043E\u0442\u0437\u044B\u0432 \u043F\u043E \u044D\u0442\u043E\u0439 \u0437\u0430\u044F\u0432\u043A\u0435 \u{1F60A} \u0421\u043F\u0430\u0441\u0438\u0431\u043E! "),s(),o(3,"div",2)(4,"button",3),h("click",function(){return n.downloadPdf()}),o(5,"span",4),a(6,"\u041F\u0430\u043C\u044F\u0442\u043A\u0430 \u043F\u043E \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u044E"),s(),F(),o(7,"svg",5),y(8,"path",6)(9,"polyline",7)(10,"line",8),s()()()())},dependencies:[D],styles:['@charset "UTF-8";.thank-you[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.thank-you-message[_ngcontent-%COMP%]{background:#6635f3;color:#fff;padding:30px;border-radius:8px;text-align:center;font-size:18px;font-weight:500;margin-bottom:20px;line-height:1.5}.download-section[_ngcontent-%COMP%]{display:flex;justify-content:center}.download-btn[_ngcontent-%COMP%]{background:#fff;border:2px solid #6635F3;color:#6635f3;padding:16px 24px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;min-width:250px;justify-content:space-between}.download-btn[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#5a2fcf;transform:translateY(-2px);box-shadow:0 4px 12px #6635f333}.download-text[_ngcontent-%COMP%]{flex:1;text-align:left}.download-icon[_ngcontent-%COMP%]{flex-shrink:0}']})};var ie=class i{downloadPdf(){let e=document.createElement("a");e.href="/assets/maintenance-guide.pdf",e.download="\u041F\u0430\u043C\u044F\u0442\u043A\u0430 \u043F\u043E \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u044E.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-timeout"]],standalone:!0,features:[x],decls:11,vars:0,consts:[[1,"timeout"],[1,"timeout-message"],[1,"download-section"],[1,"download-btn",3,"click"],[1,"download-text"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"download-icon"],["d","M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","7,10 12,15 17,10","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","15","x2","12","y2","3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),a(2," \u0412\u0440\u0435\u043C\u044F \u043E\u0436\u0438\u0434\u0430\u043D\u0438\u044F \u043E\u0446\u0435\u043D\u043A\u0438 \u0438\u0441\u0442\u0435\u043A\u043B\u043E! "),s(),o(3,"div",2)(4,"button",3),h("click",function(){return n.downloadPdf()}),o(5,"span",4),a(6,"\u041F\u0430\u043C\u044F\u0442\u043A\u0430 \u043F\u043E \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u044E"),s(),F(),o(7,"svg",5),y(8,"path",6)(9,"polyline",7)(10,"line",8),s()()()())},dependencies:[D],styles:['@charset "UTF-8";.timeout[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.timeout-message[_ngcontent-%COMP%]{background:#6635f3;color:#fff;padding:30px;border-radius:8px;text-align:center;font-size:18px;font-weight:500;margin-bottom:20px;line-height:1.5}.download-section[_ngcontent-%COMP%]{display:flex;justify-content:center}.download-btn[_ngcontent-%COMP%]{background:#fff;border:2px solid #6635F3;color:#6635f3;padding:16px 24px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;min-width:250px;justify-content:space-between}.download-btn[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#5a2fcf;transform:translateY(-2px);box-shadow:0 4px 12px #6635f333}.download-text[_ngcontent-%COMP%]{flex:1;text-align:left}.download-icon[_ngcontent-%COMP%]{flex-shrink:0}']})};function Kt(i,e){i&1&&(o(0,"div",7),y(1,"div",8),o(2,"p"),a(3,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."),s()())}function Jt(i,e){if(i&1){let t=C();o(0,"app-rating-form",9),h("ratingSubmitted",function(){f(t);let r=d();return m(r.onRatingSubmitted())}),s()}if(i&2){let t=d();c("taskId",t.taskId)("preSelectedRating",t.preSelectedRating)}}function ei(i,e){i&1&&y(0,"app-thank-you")}function ti(i,e){i&1&&y(0,"app-timeout")}function ii(i,e){if(i&1){let t=C();o(0,"div",10)(1,"div",11),F(),o(2,"svg",12),y(3,"circle",13)(4,"line",14)(5,"line",15),s()(),Se(),o(6,"h2"),a(7,"\u041E\u0448\u0438\u0431\u043A\u0430"),s(),o(8,"p"),a(9),s(),o(10,"button",16),h("click",function(){f(t);let r=d();return m(r.retry())}),a(11,"\u041F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u0441\u043D\u043E\u0432\u0430"),s()()}if(i&2){let t=d();u(9),$(t.errorMessage)}}var at=class i{constructor(e,t){this.route=e;this.taskService=t}taskId="";preSelectedRating=null;viewState="loading";errorMessage="";ngOnInit(){this.route.queryParams.subscribe(e=>{this.taskId=e.task;let t=e.rate;t==="like"?this.preSelectedRating=10:t==="dislike"&&(this.preSelectedRating=3),this.taskId?this.checkTaskStatus():(this.viewState="error",this.errorMessage="\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0430\u044F \u0441\u0441\u044B\u043B\u043A\u0430: \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440 task")})}checkTaskStatus(){console.log("Checking task status for taskId:",this.taskId),this.taskService.getTaskRating(this.taskId).subscribe({next:e=>{console.log("Server response:",e),console.log("Response type:",typeof e),typeof e=="string"?e==="\u0412\u044B \u0443\u0436\u0435 \u043E\u0441\u0442\u0430\u0432\u0438\u043B\u0438 \u043E\u0442\u0437\u044B\u0432 \u043F\u043E \u044D\u0442\u043E\u0439 \u0437\u0430\u044F\u0432\u043A\u0435 \u{1F60A} \u0421\u043F\u0430\u0441\u0438\u0431\u043E!"?(console.log("Showing thank you page"),this.viewState="thank-you"):e==="\u0412\u0440\u0435\u043C\u044F \u043E\u0436\u0438\u0434\u0430\u043D\u0438\u044F \u043E\u0446\u0435\u043D\u043A\u0438 \u0438\u0441\u0442\u0435\u043A\u043B\u043E!"?(console.log("Showing timeout page"),this.viewState="timeout"):(console.warn("Unexpected string response, showing rating form:",e),this.viewState="rating-form"):typeof e=="object"&&e.detail?e.detail==="\u041F\u043E\u043B\u0435 value \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0438\u043B\u0438 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 \u043D\u0451\u043C null."?(console.log("Showing rating form"),this.viewState="rating-form"):(console.warn("Unexpected object response, showing rating form:",e),this.viewState="rating-form"):(console.warn("Unexpected response format, showing rating form:",e),this.viewState="rating-form")},error:e=>{console.error("API Error:",e),console.error("Error details:",e.error),this.viewState="rating-form",this.errorMessage="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u0437\u0430\u0434\u0430\u0447\u0435, \u043D\u043E \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043E\u0446\u0435\u043D\u043A\u0443"}})}onRatingSubmitted(){this.viewState="thank-you"}retry(){this.viewState="loading",this.errorMessage="",this.checkTaskStatus()}static \u0275fac=function(t){return new(t||i)(p(Be),p(O))};static \u0275cmp=b({type:i,selectors:[["app-task-rating"]],standalone:!0,features:[x],decls:9,vars:5,consts:[[1,"container"],[1,"header"],[1,"logo"],["class","loading",4,"ngIf"],[3,"taskId","preSelectedRating","ratingSubmitted",4,"ngIf"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"loading"],[1,"spinner"],[3,"ratingSubmitted","taskId","preSelectedRating"],[1,"error"],[1,"error-icon"],["width","60","height","60","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","12","r","10","stroke","#e74c3c","stroke-width","2"],["x1","15","y1","9","x2","9","y2","15","stroke","#e74c3c","stroke-width","2","stroke-linecap","round"],["x1","9","y1","9","x2","15","y2","15","stroke","#e74c3c","stroke-width","2","stroke-linecap","round"],[1,"retry-btn",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),a(3,"multisupport"),s()(),_(4,Kt,4,0,"div",3)(5,Jt,1,2,"app-rating-form",4)(6,ei,1,0,"app-thank-you",5)(7,ti,1,0,"app-timeout",5)(8,ii,12,1,"div",6),s()),t&2&&(u(4),c("ngIf",n.viewState==="loading"),u(),c("ngIf",n.viewState==="rating-form"),u(),c("ngIf",n.viewState==="thank-you"),u(),c("ngIf",n.viewState==="timeout"),u(),c("ngIf",n.viewState==="error"))},dependencies:[D,z,ee,te,ie]})};export{at as TaskRatingComponent};
